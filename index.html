<script>
    /* DİKKAT: Aşağıdaki tırnak içine Playit.gg'den aldığın 
       örneğin "shiny-rock.at.ply.gg" gibi olan adresi yaz.
    */
    const myServerIP = "127.0.0.1:25565"; 

    async function checkServerStatus() {
        const statusBadge = document.getElementById('status-badge');
        const playerCount = document.getElementById('player-count'); // Eğer HTML'de bu ID varsa
        
        try {
            // Ücretsiz bir API kullanarak Minecraft sunucuna ping atıyoruz
            const response = await fetch(`https://api.mcsrvstat.us/2/${myServerIP}`);
            const data = await response.json();

            if (data.online === true) {
                statusBadge.className = "status-badge online";
                statusBadge.innerText = "● ÇEVRİMİÇİ";
                statusBadge.style.backgroundColor = "#43b581";
                
                if(playerCount) {
                    playerCount.innerText = `Aktif Oyuncu: ${data.players.online}/${data.players.max}`;
                }
                console.log("Sunucu açık!");
            } else {
                statusBadge.className = "status-badge offline";
                statusBadge.innerText = "● ÇEVRİMDIŞI (PC KAPALI)";
                statusBadge.style.backgroundColor = "#f04747";
                console.log("Sunucu kapalı.");
            }
        } catch (error) {
            console.error("Hata oluştu:", error);
            statusBadge.innerText = "SİSTEM HATASI";
        }
    }

    // Site açıldığında kontrol et
    checkServerStatus();
    
    // Her 30 saniyede bir durumu otomatik güncelle
    setInterval(checkServerStatus, 30000);
</script>
